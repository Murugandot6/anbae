import{b as k,r as y,j as e,H as N,d as F,B as P,L as u,s as A,a as d}from"./main-BHPIGV8h.js";import{u as z,F as E,a as t,b as n,c as o,d as l,e as i,t as L,o as _,s as c}from"./form-Bb0e-UzI.js";import{I as m}from"./input-Ds3Oh0yx.js";import{V as S,L as U}from"./VideoBackground-BQ0UkUze.js";import{M as B}from"./mail-D4aJpkB7.js";import{U as C}from"./user-S_xWp1ZB.js";import{U as I}from"./users-D5Y8rFmf.js";const R=_({email:c().email({message:"Please enter a valid email address."}),password:c().min(8,{message:"Password must be at least 8 characters."}).regex(/[a-z]/,{message:"Password must contain at least one lowercase letter."}).regex(/[A-Z]/,{message:"Password must contain at least one uppercase letter."}).regex(/[0-9]/,{message:"Password must contain at least one number."}).regex(/[^a-zA-Z0-9]/,{message:"Password must contain at least one special character."}),nickname:c().min(2,{message:"Nickname must be at least 2 characters."}),partner_email:c().email({message:"Please enter a valid partner email address."})}).refine(r=>r.email!==r.partner_email,{message:"Your partner's email cannot be the same as your own email.",path:["partner_email"]}),q=()=>{const r=k(),[h,g]=y.useState(!1),s=z({resolver:L(R),defaultValues:{email:"",password:"",nickname:"",partner_email:""}}),j=async a=>{const{email:b,password:v,nickname:w,partner_email:f}=a;try{const{data:x,error:p}=await A.auth.signUp({email:b,password:v,options:{data:{nickname:w,partner_email:f}}});p?d.error(p.message):x.user&&(d.success("Registration successful! Please check your email to confirm your account."),g(!0),setTimeout(()=>{r("/onboarding-welcome")},500))}catch{d.error("An unexpected error occurred during registration.")}};return e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx("title",{children:"Register - Anbae"}),e.jsx("meta",{name:"description",content:"Create your Anbae account to start nurturing your relationship with personalized communication tools."})]}),e.jsx(S,{}),e.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"absolute top-4 right-4 z-10"}),e.jsxs("div",{className:F("w-full max-w-md bg-white/30 dark:bg-gray-800/30 p-8 rounded-xl shadow-lg backdrop-blur-sm border border-white/30 dark:border-gray-600/30",h?"animate-fade-out":"animate-fade-in"),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("img",{src:"/favicon.ico",alt:"App Favicon",className:"w-12 h-12 mx-auto mb-4"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Join Anbae"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Create your personalized space."})]}),e.jsx(E,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(j),className:"space-y-6",children:[e.jsx(t,{control:s.control,name:"email",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"})," Email"]}),e.jsx(l,{children:e.jsx(m,{placeholder:"your.email@example.com",...a,type:"email",value:a.value||""})}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"password",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"})," Password"]}),e.jsx(l,{children:e.jsx(m,{placeholder:"Your password",...a,type:"password",value:a.value||""})}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"nickname",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"})," Nickname"]}),e.jsx(l,{children:e.jsx(m,{placeholder:"Your Nickname",...a,value:a.value||""})}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"partner_email",render:({field:a})=>e.jsxs(n,{children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"})," Partner's Email"]}),e.jsx(l,{children:e.jsx(m,{placeholder:"partner@example.com",...a,type:"email",value:a.value||""})}),e.jsx(i,{})]})}),e.jsxs(P,{type:"submit",className:"w-full bg-pink-600 hover:bg-pink-700 text-white dark:bg-purple-600 dark:hover:bg-purple-700",children:[e.jsx("img",{src:"/favicon.ico",alt:"Favicon",className:"w-4 h-4 mr-2"})," Create Account"]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(u,{to:"/login",className:"text-sm text-pink-600 hover:text-pink-700 dark:text-purple-400 dark:hover:text-purple-500 transition-colors",children:"Already have an account? Login here"})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(u,{to:"/",className:"text-sm text-gray-800 hover:text-gray-900 dark:text-gray-200 dark:hover:text-gray-100 transition-colors",children:"‚Üê Back to Home"})})]})]})]})};export{q as default};
