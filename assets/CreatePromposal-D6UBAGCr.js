import{c as u,n as g,b as j,j as e,x as y,H as N,L as w,B as l,a,s as v}from"./main-DjNC3G64.js";import{u as C,F as L,a as c,b as n,c as i,d,e as x,t as k,o as F,s as p}from"./form-CKMLyXiC.js";import{I as _}from"./input-jGJX85w3.js";import{T as S}from"./textarea-CY6IaKIv.js";import{C as P,a as V,b as z,d as A,c as I}from"./card-DWGr94Ni.js";import{B as M}from"./BackgroundWrapper-B09iK6D5.js";import{A as R}from"./arrow-left-CCXN5EYU.js";import{S as T}from"./sparkles-8GkO1PZx.js";import"./label-BhBloIXZ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=u("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=u("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),U=F({video_url:p().url({message:"Please enter a valid video URL."}),lrc_content:p().min(1,"Please provide LRC format lyrics.")}),O=()=>{const{user:t,loading:h}=g(),o=j(),r=C({resolver:k(U),defaultValues:{video_url:"",lrc_content:""}}),b=async s=>{if(!t){a.error("You must be logged in to create a promposal.");return}const{data:f,error:m}=await v.from("proposals").insert({creator_id:t.id,video_url:s.video_url,lrc_content:s.lrc_content}).select("id").single();m?a.error("Failed to create promposal: "+m.message):(a.success("Promposal created successfully!"),o(`/promposal/${f.id}`))};return h?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-background to-background/80 text-foreground",children:[e.jsx(y,{}),e.jsx("p",{className:"text-xl mt-4",children:"Loading..."})]}):t?e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx("title",{children:"Create Promposal - Anbae"}),e.jsx("meta",{name:"description",content:"Create a personalized video promposal with synchronized lyrics for your partner on Anbae."})]}),e.jsx(M,{className:"pt-0 md:pt-0",children:e.jsxs("div",{className:"w-full max-w-xl sm:max-w-2xl mx-auto p-4 md:p-8 mt-16 md:mt-8",children:[e.jsxs("header",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(w,{to:"/dashboard",children:e.jsx(l,{variant:"outline",size:"icon",className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full text-foreground border-border hover:bg-accent hover:text-accent-foreground shadow-md",children:e.jsx(R,{className:"w-4 h-4 sm:w-5 sm:h-5"})})})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mx-auto",children:"Create Your Promposal"})]}),e.jsxs(P,{className:"bg-card/60 dark:bg-card/60 shadow-lg backdrop-blur-md border border-border/50 rounded-xl p-3 sm:p-4",children:[" ",e.jsxs(V,{className:"pb-3 sm:pb-4",children:[" ",e.jsxs(z,{className:"flex items-center gap-2 text-xl sm:text-2xl font-bold text-foreground",children:[e.jsx(T,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"}),"A Special Message"]}),e.jsx(A,{className:"text-muted-foreground text-sm sm:text-base",children:"Set up a video with synchronized lyrics to share with your partner."})]}),e.jsx(I,{className:"pt-0",children:e.jsx(L,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(b),className:"space-y-5 sm:space-y-6",children:[e.jsx(c,{control:r.control,name:"video_url",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(H,{className:"w-4 h-4 text-primary"})," Video URL"]}),e.jsx(d,{children:e.jsx(_,{placeholder:"https://www.youtube.com/watch?v=...",...s,className:"bg-input/50 border-border/50 text-foreground text-sm sm:text-base"})}),e.jsx(x,{className:"text-xs sm:text-sm"})]})}),e.jsx(c,{control:r.control,name:"lrc_content",render:({field:s})=>e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(B,{className:"w-4 h-4 text-primary"})," Lyrics (LRC Format)"]}),e.jsx(d,{children:e.jsx(S,{placeholder:"[00:01.15]I love you still...",...s,rows:8,className:"font-mono text-xs sm:text-sm bg-input/50 border-border/50 text-foreground min-h-[120px] sm:min-h-[160px]"})}),e.jsx(x,{className:"text-xs sm:text-sm"})]})}),e.jsx(l,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground text-sm sm:text-base py-2 sm:py-2.5",children:"Create & Get Link"})]})})})]})]})})]}):(o("/login"),null)};export{O as default};
