import{c as p,l as j,b,j as e,H as y,L as v,B as c,a as o,s as N}from"./main-BHPIGV8h.js";import{u as w,F as C,a as n,b as i,c as d,d as m,e as x,t as L,o as k,s as u}from"./form-Bb0e-UzI.js";import{I as F}from"./input-Ds3Oh0yx.js";import{T as _}from"./textarea-DDVBgeYU.js";import{C as S,a as P,b as V,d as z,c as A}from"./card-CN1N3ooC.js";import{B as I}from"./BackgroundWrapper-C6a75pID.js";import{A as M}from"./arrow-left-C4HDbgt0.js";import{S as R}from"./sparkles-BcM3QIw-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=p("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=p("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),H=k({video_url:u().url({message:"Please enter a valid video URL."}),lrc_content:u().min(1,"Please provide LRC format lyrics.")}),J=()=>{const{user:a,loading:h}=j(),t=b(),s=w({resolver:L(H),defaultValues:{video_url:"",lrc_content:""}}),f=async r=>{if(!a){o.error("You must be logged in to create a promposal.");return}const{data:g,error:l}=await N.from("proposals").insert({creator_id:a.id,video_url:r.video_url,lrc_content:r.lrc_content}).select("id").single();l?o.error("Failed to create promposal: "+l.message):(o.success("Promposal created successfully!"),t(`/promposal/${g.id}`))};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-background/80 text-foreground",children:e.jsx("p",{className:"text-xl",children:"Loading..."})}):a?e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx("title",{children:"Create Promposal - Anbae"}),e.jsx("meta",{name:"description",content:"Create a personalized video promposal with synchronized lyrics for your partner on Anbae."})]}),e.jsx(I,{className:"pt-0 md:pt-0",children:e.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 md:p-8 mt-16 md:mt-8",children:[e.jsxs("header",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx(v,{to:"/dashboard",children:e.jsx(c,{variant:"outline",size:"icon",className:"w-10 h-10 rounded-full text-foreground border-border hover:bg-accent hover:text-accent-foreground shadow-md",children:e.jsx(M,{className:"w-5 h-5"})})})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mx-auto",children:"Create Your Promposal"})]}),e.jsxs(S,{className:"bg-card/60 dark:bg-card/60 shadow-lg backdrop-blur-md border border-border/50 rounded-xl",children:[e.jsxs(P,{children:[e.jsxs(V,{className:"flex items-center gap-2 text-2xl font-bold text-foreground",children:[e.jsx(R,{className:"w-6 h-6 text-primary"}),"A Special Message"]}),e.jsx(z,{className:"text-muted-foreground",children:"Set up a video with synchronized lyrics to share with your partner."})]}),e.jsx(A,{children:e.jsx(C,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(f),className:"space-y-6",children:[e.jsx(n,{control:s.control,name:"video_url",render:({field:r})=>e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-primary"})," Video URL"]}),e.jsx(m,{children:e.jsx(F,{placeholder:"https://www.youtube.com/watch?v=...",...r,className:"bg-input/50 border-border/50 text-foreground"})}),e.jsx(x,{})]})}),e.jsx(n,{control:s.control,name:"lrc_content",render:({field:r})=>e.jsxs(i,{children:[e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-primary"})," Lyrics (LRC Format)"]}),e.jsx(m,{children:e.jsx(_,{placeholder:"[00:01.15]I love you still...",...r,rows:10,className:"font-mono text-sm bg-input/50 border-border/50 text-foreground"})}),e.jsx(x,{})]})}),e.jsx(c,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:"Create & Get Link"})]})})})]})]})})]}):(t("/login"),null)};export{J as default};
